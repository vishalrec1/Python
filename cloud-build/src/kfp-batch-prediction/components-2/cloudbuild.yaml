steps:
  - name: python:3.7
    entrypoint: python
    args: ["-m", "pip", "install", "--upgrade", "pip"]

  # [START cloudbuild_python_dependencies_yaml]
  # Install dependencies
  - name: python:3.7
    entrypoint: python
    args: ["-m", "pip", "install", "build",  "google-cloud-aiplatform", "google-cloud-bigquery", "google-cloud-storage","kfp","gcsfuse","datetime","--user"]
  # [END cloudbuild_python_dependencies_yaml]
  
  - name: python:3.7
    entrypoint: python
    args: ["add", "*.py", "/"]
    args: ["python", "./copy_json_to_gcs.py"]
    
  # [START cloudbuild_python_package_yaml]
  # Python Build
  - name: python:3.7
    entrypoint: python
    args: ["-m", "build"]
  # [END cloudbuild_python_package_yaml]


# Store Python package in Google Artifact Registry
artifacts:
  pythonPackages:
    - repository: "https://us-central1-python.pkg.dev/gcp-practice-0123/py-gar-repo-test"
      paths: ["dist/*"]
# [END cloudbuild_python_yaml]
